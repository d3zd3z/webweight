---
# vim: set sw=2:
# This is a somewhat ad-hoc representation of the POM format in YAML.
# Yes, it breaks the ability to edit the POM file with tools, but this
# is vastly easier for humans to edit.
#
# Generate the pom file with:
#   yaml2xml.rb --pom pom.yaml > pom.xml

modelVersion: 4.0.0
groupId: org.davidb
artifactId: webweight
packaging: jar
version: 1.0-SNAPSHOT
name: WebWeight
url: http://www.davidb.org/weight

properties:
  project.build.sourceEncoding: UTF-8

build:
  plugins:
    - groupId: com.theoryinpractise
      artifactId: clojure-maven-plugin
      version: 1.1
      configuration:
        testScript: src/test/clojure/test.clj
      executions:
        - id: compile
          phase: compile
          goals: [compile]
#        - id: test
#          phase: test
#          goals: [test]

    - artifactId: maven-assembly-plugin
      configuration:
        descriptorRefs: [jar-with-dependencies]
        archive:
          manifest:
            mainClass: org.davidb.webweight.main
      executions:
        - id: make-assembly
          phase: package
          goals: [single]

#  resources:
#    - directory: src/main/resources
#      filtering: true

profiles:
  - id: setup-repl
    build:
      plugins:
        - groupId: com.theoryinpractise
          artifactId: clojure-maven-plugin
          configuration:
            script: src/util/clojure/setup_repl.clj

dependencies:
  - groupId: org.clojure
    artifactId: clojure
    version: 1.1.0-alpha-SNAPSHOT

  - groupId: org.clojure
    artifactId: clojure-contrib
    version: 1.0-SNAPSHOT

  - groupId: com.weavejester
    artifactId: compojure
    version: 0.3.1-SNAPSHOT

  - groupId: commons-lang
    artifactId: commons-lang
    version: '2.4'

  - groupId: org.yaml
    artifactId: snakeyaml
    version: '1.4'

repositories:
  - id: clojure-snapshot
    name: Clojure snapshot repository
    url: http://build.clojure.org/snapshots
    snapshots: {enabled: true}
